basePath: /api/v1/admin
definitions:
  admin.ClientTypeInfo:
    properties:
      configSchema:
        $ref: '#/definitions/clients.Schema'
      displayName:
        example: Telegram
        type: string
      type:
        example: telegram
        type: string
    type: object
  admin.ErrorResponse:
    properties:
      error:
        example: resource not found
        type: string
    type: object
  admin.MemoryTypeInfo:
    properties:
      categories:
        example:
        - session
        items:
          type: string
        type: array
      configSchema:
        $ref: '#/definitions/memory.Schema'
      displayName:
        example: Redis
        type: string
      type:
        example: redis
        type: string
    type: object
  admin.SecretCreateRequest:
    properties:
      description:
        example: Production key for GPT-4o
        type: string
      key:
        example: OPENAI_API_KEY
        type: string
      name:
        example: OpenAI API Key
        type: string
      value:
        example: sk-...
        type: string
    type: object
  admin.SecretResponse:
    properties:
      description:
        example: Production key for GPT-4o
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      key:
        example: OPENAI_API_KEY
        type: string
      name:
        example: OpenAI API Key
        type: string
    type: object
  admin.SecretUpdateRequest:
    properties:
      description:
        example: Production key for GPT-4o
        type: string
      key:
        example: OPENAI_API_KEY
        type: string
      name:
        example: OpenAI API Key
        type: string
      value:
        example: sk-...
        type: string
    type: object
  clients.Schema:
    additionalProperties: true
    type: object
  memory.HealthResult:
    properties:
      detail:
        type: string
      healthy:
        type: boolean
    type: object
  memory.Schema:
    additionalProperties: true
    type: object
  store.AgentDefinition:
    properties:
      contextGuard:
        $ref: '#/definitions/store.ContextGuardConfig'
      description:
        type: string
      id:
        type: string
      llm:
        $ref: '#/definitions/store.BackendRef'
      mcpServers:
        items:
          type: string
        type: array
      name:
        type: string
      outputKey:
        type: string
      skills:
        items:
          type: string
        type: array
      systemPrompt:
        type: string
      tags:
        items:
          type: string
        type: array
      transcription:
        $ref: '#/definitions/store.BackendRef'
      tts:
        $ref: '#/definitions/store.TTSRef'
    type: object
  store.BackendDefinition:
    properties:
      apiKey:
        type: string
      id:
        type: string
      name:
        type: string
      type:
        type: string
      url:
        type: string
    type: object
  store.BackendRef:
    properties:
      backend:
        type: string
      model:
        type: string
    type: object
  store.ClientConfig:
    properties:
      cron:
        $ref: '#/definitions/store.CronClientConfig'
      discord:
        $ref: '#/definitions/store.DiscordClientConfig'
      slack:
        $ref: '#/definitions/store.SlackClientConfig'
      telegram:
        $ref: '#/definitions/store.TelegramClientConfig'
      webhook:
        $ref: '#/definitions/store.WebhookClientConfig'
    type: object
  store.ClientDefinition:
    properties:
      allowedAgents:
        items:
          type: string
        type: array
      config:
        $ref: '#/definitions/store.ClientConfig'
      enabled:
        type: boolean
      id:
        type: string
      name:
        type: string
      token:
        type: string
      type:
        type: string
    type: object
  store.Command:
    properties:
      description:
        type: string
      id:
        type: string
      name:
        type: string
      prompt:
        type: string
    type: object
  store.ContextGuardConfig:
    properties:
      enabled:
        type: boolean
      maxTurns:
        type: integer
      strategy:
        type: string
    type: object
  store.Conversation:
    properties:
      agentId:
        type: string
      agentName:
        type: string
      clientId:
        type: string
      clientName:
        type: string
      endedAt:
        type: string
      flowId:
        type: string
      flowName:
        type: string
      id:
        type: string
      messages:
        items:
          $ref: '#/definitions/store.ConversationMessage'
        type: array
      parentId:
        type: string
      perspective:
        type: string
      preview:
        type: string
      rawEvents:
        items: {}
        type: array
      sessionId:
        type: string
      source:
        type: string
      startedAt:
        type: string
      summary:
        type: string
      userId:
        type: string
    type: object
  store.ConversationMessage:
    properties:
      agent:
        type: string
      content:
        type: string
      metadata:
        additionalProperties: true
        type: object
      role:
        type: string
      timestamp:
        type: string
      toolCalls:
        items:
          $ref: '#/definitions/store.ToolCallInfo'
        type: array
    type: object
  store.CronClientConfig:
    properties:
      commandId:
        type: string
      schedule:
        type: string
    type: object
  store.DiscordClientConfig:
    properties:
      allowedChannels:
        items:
          type: string
        type: array
      allowedUsers:
        items:
          type: string
        type: array
      botToken:
        type: string
      guildId:
        type: string
    type: object
  store.FlowDefinition:
    properties:
      description:
        type: string
      id:
        type: string
      name:
        type: string
      root:
        $ref: '#/definitions/store.FlowStep'
    type: object
  store.FlowStep:
    properties:
      agentId:
        type: string
      maxIterations:
        type: integer
      responseAgent:
        type: boolean
      steps:
        items:
          $ref: '#/definitions/store.FlowStep'
        type: array
      type:
        type: string
    type: object
  store.MCPServer:
    properties:
      args:
        items:
          type: string
        type: array
      command:
        type: string
      endpoint:
        type: string
      env:
        additionalProperties:
          type: string
        type: object
      headers:
        additionalProperties:
          type: string
        type: object
      id:
        type: string
      insecure:
        type: boolean
      name:
        type: string
      systemPrompt:
        type: string
      type:
        type: string
      workDir:
        type: string
    type: object
  store.MemoryProvider:
    properties:
      category:
        type: string
      config:
        additionalProperties: true
        type: object
      embedding:
        $ref: '#/definitions/store.BackendRef'
      id:
        type: string
      name:
        type: string
      type:
        type: string
    type: object
  store.PaginatedResult-store_Conversation:
    properties:
      items:
        items:
          $ref: '#/definitions/store.Conversation'
        type: array
      total:
        type: integer
    type: object
  store.Settings:
    properties:
      longTermProvider:
        type: string
      sessionProvider:
        type: string
    type: object
  store.Skill:
    properties:
      description:
        type: string
      id:
        type: string
      instructions:
        type: string
      name:
        type: string
      references:
        items:
          $ref: '#/definitions/store.SkillReference'
        type: array
    type: object
  store.SkillReference:
    properties:
      filename:
        type: string
      size:
        type: integer
    type: object
  store.SlackClientConfig:
    properties:
      allowedChannels:
        items:
          type: string
        type: array
      allowedUsers:
        items:
          type: string
        type: array
      appToken:
        type: string
      botToken:
        type: string
      responseMode:
        type: string
    type: object
  store.TTSRef:
    properties:
      backend:
        type: string
      model:
        type: string
      speed:
        type: number
      voice:
        type: string
    type: object
  store.TelegramClientConfig:
    properties:
      allowedChats:
        items:
          type: integer
        type: array
      allowedUsers:
        items:
          type: integer
        type: array
      botToken:
        type: string
      responseMode:
        type: string
    type: object
  store.ToolCallInfo:
    properties:
      args: {}
      name:
        type: string
      result: {}
    type: object
  store.WebhookClientConfig:
    properties:
      commandId:
        type: string
      passthrough:
        type: boolean
    type: object
host: localhost:8081
info:
  contact: {}
  description: |-
    Administration API for managing Magec resources.
    When server.adminPassword is configured, all /api/ endpoints require a Bearer token.
  title: Magec Admin API
  version: "2.0"
paths:
  /agents:
    get:
      description: Returns all configured AI agents
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.AgentDefinition'
            type: array
      security:
      - AdminAuth: []
      summary: List agents
      tags:
      - agents
    post:
      consumes:
      - application/json
      description: Creates a new AI agent with LLM, TTS, and memory configuration
      parameters:
      - description: Agent definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.AgentDefinition'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.AgentDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create agent
      tags:
      - agents
  /agents/{id}:
    delete:
      description: Deletes an agent by ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete agent
      tags:
      - agents
    get:
      description: Returns an agent by its unique ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.AgentDefinition'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get agent
      tags:
      - agents
    put:
      consumes:
      - application/json
      description: Updates an agent by ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: Agent definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.AgentDefinition'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.AgentDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update agent
      tags:
      - agents
  /agents/{id}/mcps:
    get:
      description: Returns the MCP servers linked to a specific agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.MCPServer'
            type: array
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: List agent MCP servers
      tags:
      - agents
  /agents/{id}/mcps/{mcpId}:
    delete:
      description: Removes the association between an MCP server and an agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: MCP Server ID
        in: path
        name: mcpId
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Unlink MCP from agent
      tags:
      - agents
    put:
      description: Associates an MCP server with an agent, giving the agent access
        to its tools
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: MCP Server ID
        in: path
        name: mcpId
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Link MCP to agent
      tags:
      - agents
  /backends:
    get:
      description: Returns all configured LLM/TTS/transcription backends
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.BackendDefinition'
            type: array
      security:
      - AdminAuth: []
      summary: List backends
      tags:
      - backends
    post:
      consumes:
      - application/json
      description: Creates a new LLM/TTS/transcription backend
      parameters:
      - description: Backend definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.BackendDefinition'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.BackendDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create backend
      tags:
      - backends
  /backends/{id}:
    delete:
      description: Deletes a backend by ID
      parameters:
      - description: Backend ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete backend
      tags:
      - backends
    get:
      description: Returns a backend by its unique ID
      parameters:
      - description: Backend ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.BackendDefinition'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get backend
      tags:
      - backends
    put:
      consumes:
      - application/json
      description: Updates a backend by ID
      parameters:
      - description: Backend ID
        in: path
        name: id
        required: true
        type: string
      - description: Backend definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.BackendDefinition'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.BackendDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update backend
      tags:
      - backends
  /clients:
    get:
      description: Returns all configured clients (devices, Telegram bots, etc.)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.ClientDefinition'
            type: array
      security:
      - AdminAuth: []
      summary: List clients
      tags:
      - clients
    post:
      consumes:
      - application/json
      description: Creates a new client. A unique auth token is generated automatically.
      parameters:
      - description: Client definition (token is auto-generated)
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.ClientDefinition'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.ClientDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create client
      tags:
      - clients
  /clients/{id}:
    delete:
      description: Deletes a client by ID, revoking its access token
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete client
      tags:
      - clients
    get:
      description: Returns a client by its unique ID
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.ClientDefinition'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get client
      tags:
      - clients
    put:
      consumes:
      - application/json
      description: Updates a client by ID. Token and ID are preserved.
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      - description: Client definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.ClientDefinition'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.ClientDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update client
      tags:
      - clients
  /clients/{id}/regenerate-token:
    post:
      description: Generates a new authentication token for a client, invalidating
        the previous one
      parameters:
      - description: Client ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.ClientDefinition'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Regenerate client token
      tags:
      - clients
  /clients/types:
    get:
      description: Returns registered client types with config field specifications
        for dynamic form rendering
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/admin.ClientTypeInfo'
            type: array
      security:
      - AdminAuth: []
      summary: List client types
      tags:
      - clients
  /commands:
    get:
      description: Returns all configured reusable prompt commands
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.Command'
            type: array
      security:
      - AdminAuth: []
      summary: List commands
      tags:
      - commands
    post:
      consumes:
      - application/json
      description: Creates a new reusable prompt command
      parameters:
      - description: Command definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.Command'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.Command'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create command
      tags:
      - commands
  /commands/{id}:
    delete:
      description: Deletes a command by ID
      parameters:
      - description: Command ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete command
      tags:
      - commands
    get:
      description: Returns a command by its unique ID
      parameters:
      - description: Command ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Command'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get command
      tags:
      - commands
    put:
      consumes:
      - application/json
      description: Updates a command by ID
      parameters:
      - description: Command ID
        in: path
        name: id
        required: true
        type: string
      - description: Command definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.Command'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Command'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update command
      tags:
      - commands
  /conversations:
    get:
      description: Returns a paginated list of conversation audit logs, newest first.
        Filters by agent, source, or client.
      parameters:
      - description: Filter by agent or flow ID
        in: query
        name: agentId
        type: string
      - description: Filter by source (voice-ui, telegram, executor, direct, cron,
          webhook)
        in: query
        name: source
        type: string
      - description: Filter by client ID
        in: query
        name: clientId
        type: string
      - description: Filter by perspective (admin, user)
        in: query
        name: perspective
        type: string
      - description: Max items to return (default 30, 0 for all)
        in: query
        name: limit
        type: integer
      - description: Items to skip (default 0)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.PaginatedResult-store_Conversation'
      security:
      - AdminAuth: []
      summary: List conversations
      tags:
      - conversations
  /conversations/{id}:
    delete:
      description: Deletes a conversation audit log by ID. Does not affect the ADK
        session.
      parameters:
      - description: Conversation ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete conversation
      tags:
      - conversations
    get:
      description: Returns a conversation by ID with paginated messages (latest first).
        Includes totalMessages for client-side pagination.
      parameters:
      - description: Conversation ID
        in: path
        name: id
        required: true
        type: string
      - description: Max messages to return (default 50, 0 for all)
        in: query
        name: msgLimit
        type: integer
      - description: Messages to skip from the end (default 0)
        in: query
        name: msgOffset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: conversation + totalMessages
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get conversation
      tags:
      - conversations
  /conversations/{id}/reset-session:
    post:
      description: Deletes the ADK session (in Redis or in-memory) for the agent/user/session
        referenced by this conversation. The user will start a fresh session on their
        next message. The conversation audit log is preserved.
      parameters:
      - description: Conversation ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: message, agentId, sessionId
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "502":
          description: Bad Gateway
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Reset ADK session
      tags:
      - conversations
  /conversations/{id}/summary:
    put:
      consumes:
      - application/json
      description: Sets the summary text for a conversation. Used for context window
        summarization.
      parameters:
      - description: Conversation ID
        in: path
        name: id
        required: true
        type: string
      - description: Summary text
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Conversation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update conversation summary
      tags:
      - conversations
  /conversations/clear:
    delete:
      description: Deletes all conversation audit logs. Does not affect ADK sessions.
      responses:
        "204":
          description: No Content
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Clear all conversations
      tags:
      - conversations
  /conversations/stats:
    get:
      description: Returns total count and breakdowns by source and agent.
      produces:
      - application/json
      responses:
        "200":
          description: total, bySources, byAgents
          schema:
            additionalProperties: true
            type: object
      security:
      - AdminAuth: []
      summary: Conversation statistics
      tags:
      - conversations
  /flows:
    get:
      description: Returns all configured agent orchestration flows
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.FlowDefinition'
            type: array
      security:
      - AdminAuth: []
      summary: List flows
      tags:
      - flows
    post:
      consumes:
      - application/json
      description: Creates a new agent orchestration flow with a recursive step tree
      parameters:
      - description: Flow definition with root step tree
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.FlowDefinition'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.FlowDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create flow
      tags:
      - flows
  /flows/{id}:
    delete:
      description: Deletes a flow by ID
      parameters:
      - description: Flow ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete flow
      tags:
      - flows
    get:
      description: Returns a flow by its unique ID
      parameters:
      - description: Flow ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.FlowDefinition'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get flow
      tags:
      - flows
    put:
      consumes:
      - application/json
      description: Updates a flow by ID
      parameters:
      - description: Flow ID
        in: path
        name: id
        required: true
        type: string
      - description: Flow definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.FlowDefinition'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.FlowDefinition'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update flow
      tags:
      - flows
  /mcps:
    get:
      description: Returns all configured MCP (Model Context Protocol) servers
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.MCPServer'
            type: array
      security:
      - AdminAuth: []
      summary: List MCP servers
      tags:
      - mcps
    post:
      consumes:
      - application/json
      description: Creates a new MCP server configuration
      parameters:
      - description: MCP server definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.MCPServer'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.MCPServer'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create MCP server
      tags:
      - mcps
  /mcps/{id}:
    delete:
      description: Deletes an MCP server by ID
      parameters:
      - description: MCP Server ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete MCP server
      tags:
      - mcps
    get:
      description: Returns an MCP server by its unique ID
      parameters:
      - description: MCP Server ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.MCPServer'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get MCP server
      tags:
      - mcps
    put:
      consumes:
      - application/json
      description: Updates an MCP server by ID
      parameters:
      - description: MCP Server ID
        in: path
        name: id
        required: true
        type: string
      - description: MCP server definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.MCPServer'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.MCPServer'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update MCP server
      tags:
      - mcps
  /memory:
    get:
      description: Returns all configured memory providers (Redis, Postgres, etc.)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.MemoryProvider'
            type: array
      security:
      - AdminAuth: []
      summary: List memory providers
      tags:
      - memory
    post:
      consumes:
      - application/json
      description: Creates a new memory provider (session, semantic, etc.)
      parameters:
      - description: Memory provider definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.MemoryProvider'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.MemoryProvider'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create memory provider
      tags:
      - memory
  /memory/{id}:
    delete:
      description: Deletes a memory provider by ID
      parameters:
      - description: Memory Provider ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete memory provider
      tags:
      - memory
    get:
      description: Returns a memory provider by its unique ID
      parameters:
      - description: Memory Provider ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.MemoryProvider'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get memory provider
      tags:
      - memory
    put:
      consumes:
      - application/json
      description: Updates a memory provider by ID
      parameters:
      - description: Memory Provider ID
        in: path
        name: id
        required: true
        type: string
      - description: Memory provider definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.MemoryProvider'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.MemoryProvider'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update memory provider
      tags:
      - memory
  /memory/{id}/health:
    get:
      description: Pings the memory provider to verify connectivity
      parameters:
      - description: Memory Provider ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/memory.HealthResult'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Check memory provider health
      tags:
      - memory
  /memory/types:
    get:
      description: Returns registered memory provider types with config schemas for
        dynamic form rendering
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/admin.MemoryTypeInfo'
            type: array
      security:
      - AdminAuth: []
      summary: List memory types
      tags:
      - memory
  /secrets:
    get:
      description: Returns all configured secrets without their values
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/admin.SecretResponse'
            type: array
      security:
      - AdminAuth: []
      summary: List secrets
      tags:
      - secrets
    post:
      consumes:
      - application/json
      description: Creates a new secret. The value is encrypted at rest when adminPassword
        is configured.
      parameters:
      - description: Secret definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/admin.SecretCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/admin.SecretResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create secret
      tags:
      - secrets
  /secrets/{id}:
    delete:
      description: Deletes a secret by ID
      parameters:
      - description: Secret ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete secret
      tags:
      - secrets
    get:
      description: Returns a secret by its unique ID without the value
      parameters:
      - description: Secret ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/admin.SecretResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get secret
      tags:
      - secrets
    put:
      consumes:
      - application/json
      description: Updates a secret by ID. Omit value to keep the current one.
      parameters:
      - description: Secret ID
        in: path
        name: id
        required: true
        type: string
      - description: Secret definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/admin.SecretUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/admin.SecretResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update secret
      tags:
      - secrets
  /settings:
    get:
      description: Returns the global settings (session provider, long-term memory
        provider).
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Settings'
      security:
      - AdminAuth: []
      summary: Get settings
      tags:
      - settings
    put:
      consumes:
      - application/json
      description: Replaces the global settings. Changes take effect on next agent
        rebuild.
      parameters:
      - description: New settings
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.Settings'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Settings'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update settings
      tags:
      - settings
  /skills:
    get:
      description: Returns all configured skills
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/store.Skill'
            type: array
      security:
      - AdminAuth: []
      summary: List skills
      tags:
      - skills
    post:
      consumes:
      - application/json
      description: Creates a new skill with instructions and optional references
      parameters:
      - description: Skill definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.Skill'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.Skill'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Create skill
      tags:
      - skills
  /skills/{id}:
    delete:
      description: Deletes a skill by ID
      parameters:
      - description: Skill ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete skill
      tags:
      - skills
    get:
      description: Returns a skill by its unique ID
      parameters:
      - description: Skill ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Skill'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Get skill
      tags:
      - skills
    put:
      consumes:
      - application/json
      description: Updates a skill by ID
      parameters:
      - description: Skill ID
        in: path
        name: id
        required: true
        type: string
      - description: Skill definition
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/store.Skill'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/store.Skill'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Update skill
      tags:
      - skills
  /skills/{id}/references:
    post:
      consumes:
      - multipart/form-data
      description: Uploads a file and registers it as a reference for the skill
      parameters:
      - description: Skill ID
        in: path
        name: id
        required: true
        type: string
      - description: Reference file
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/store.SkillReference'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Upload skill reference
      tags:
      - skills
  /skills/{id}/references/{filename}:
    delete:
      description: Removes a reference file from a skill
      parameters:
      - description: Skill ID
        in: path
        name: id
        required: true
        type: string
      - description: Reference filename
        in: path
        name: filename
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Delete skill reference
      tags:
      - skills
    get:
      description: Downloads a reference file from a skill
      parameters:
      - description: Skill ID
        in: path
        name: id
        required: true
        type: string
      - description: Reference filename
        in: path
        name: filename
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/admin.ErrorResponse'
      security:
      - AdminAuth: []
      summary: Download skill reference
      tags:
      - skills
schemes:
- http
securityDefinitions:
  AdminAuth:
    description: Enter "Bearer {adminPassword}" to authenticate. Only required when
      server.adminPassword is set.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
