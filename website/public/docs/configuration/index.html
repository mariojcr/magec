<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuration — Magec — Self-hosted Multi-Agent AI Platform</title>
  <meta name="description" content="Define multiple AI agents, chain them into workflows, connect tools. Voice, Telegram, webhooks, cron. Your server, your rules.">
  <meta name="theme-color" content="#1c1917">
  <link rel="icon" type="image/svg+xml" href="/img/logo.svg">
  <link rel="stylesheet" href="/css/style.css">
  <meta property="og:title" content="Configuration">
  <meta property="og:description" content="Define multiple AI agents, chain them into workflows, connect tools. Voice, Telegram, webhooks, cron. Your server, your rules.">
  <meta property="og:type" content="website">
</head>
<body>
  <nav class="nav scrolled">
  <div class="nav__inner">
    <a href="/" class="nav__logo">
      <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs><linearGradient id="ng" x1="0%" y1="100%" x2="100%" y2="0%"><stop offset="0%" stop-color="#f59e0b"/><stop offset="100%" stop-color="#f87171"/></linearGradient></defs>
        <circle cx="32" cy="32" r="26" fill="url(#ng)"/>
        <circle cx="20" cy="24" r="2" fill="white" opacity=".9"/><circle cx="26" cy="18" r="1.5" fill="white" opacity=".7"/>
        <circle cx="40" cy="22" r="1.8" fill="white" opacity=".8"/><circle cx="46" cy="30" r="1.2" fill="white" opacity=".6"/>
        <circle cx="38" cy="38" r="2" fill="white" opacity=".75"/><circle cx="24" cy="40" r="1.4" fill="white" opacity=".65"/>
      </svg>
      Magec
    </a>
    <button class="nav__toggle" aria-label="Toggle menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
    </button>
    <ul class="nav__links">
      
      <li><a href="/#how-it-works" class="nav__link">How it works</a></li>
      
      <li><a href="/#what" class="nav__link">Platform</a></li>
      
      <li><a href="/#use-cases" class="nav__link">Use cases</a></li>
      
      <li><a href="/#screenshots" class="nav__link">Screenshots</a></li>
      
      <li><a href="/docs/" class="nav__link">Docs</a></li>
      
      <li>
        <a href="https://github.com/achetronic/magec" class="nav__cta" target="_blank" rel="noopener">
          <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
          GitHub
        </a>
      </li>
    </ul>
  </div>
</nav>

  <main>
    
<div class="container">
  <div class="docs-layout">
    <aside class="docs-sidebar">
      
      
      <div class="docs-sidebar__group">
        <div class="docs-sidebar__label">Getting Started</div>
        
        <a href="/docs/install-docker/" class="docs-sidebar__link">Docker Quick Start</a>
        
        <a href="/docs/install-compose-local/" class="docs-sidebar__link">Docker Compose</a>
        
        <a href="/docs/install-binary/" class="docs-sidebar__link">Binary Install</a>
        
        <a href="/docs/configuration/" class="docs-sidebar__link docs-sidebar__link--active">Configuration</a>
        
      </div>
      
      
      
      <div class="docs-sidebar__group">
        <div class="docs-sidebar__label">Security</div>
        
        <a href="/docs/admin-password/" class="docs-sidebar__link">Admin Password</a>
        
      </div>
      
      
      
      <div class="docs-sidebar__group">
        <div class="docs-sidebar__label">Core Concepts</div>
        
        <a href="/docs/agents/" class="docs-sidebar__link">Agents</a>
        
        <a href="/docs/flows/" class="docs-sidebar__link">Agentic Flows</a>
        
        <a href="/docs/backends/" class="docs-sidebar__link">AI Backends</a>
        
        <a href="/docs/memory/" class="docs-sidebar__link">Memory</a>
        
        <a href="/docs/mcp/" class="docs-sidebar__link">MCP Tools</a>
        
        <a href="/docs/skills/" class="docs-sidebar__link">Skills</a>
        
        <a href="/docs/a2a/" class="docs-sidebar__link">A2A Protocol</a>
        
        <a href="/docs/secrets/" class="docs-sidebar__link">Secrets</a>
        
        <a href="/docs/commands/" class="docs-sidebar__link">Commands</a>
        
      </div>
      
      
      
      <div class="docs-sidebar__group">
        <div class="docs-sidebar__label">Clients</div>
        
        <a href="/docs/clients/" class="docs-sidebar__link">Overview</a>
        
        <a href="/docs/voice-ui/" class="docs-sidebar__link">Voice UI</a>
        
        <a href="/docs/telegram/" class="docs-sidebar__link">Telegram</a>
        
        <a href="/docs/slack/" class="docs-sidebar__link">Slack</a>
        
        <a href="/docs/webhooks/" class="docs-sidebar__link">Webhooks</a>
        
        <a href="/docs/cron/" class="docs-sidebar__link">Cron</a>
        
      </div>
      
      
      
      <div class="docs-sidebar__group">
        <div class="docs-sidebar__label">Reference</div>
        
        <a href="/docs/api/" class="docs-sidebar__link">API Reference</a>
        
        <a href="/docs/voice-system/" class="docs-sidebar__link">Voice System</a>
        
        <a href="/docs/secrets-advanced/" class="docs-sidebar__link">Advanced Secrets</a>
        
        <a href="/docs/skills-vs-agents/" class="docs-sidebar__link">Skills vs. Agents</a>
        
        <a href="/docs/screenshots/" class="docs-sidebar__link">Screenshots</a>
        
      </div>
      
      
    </aside>
    <div class="docs-content">
      <button class="docs-sidebar-toggle btn btn--ghost">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        Navigation
      </button>
      <h1>Configuration</h1>
      <p>Magec uses two separate configuration layers. Understanding this split is important because they work differently and serve different purposes.</p>
<h2 id="the-two-layers">The two layers</h2>
<table>
  <thead>
      <tr>
          <th>Layer</th>
          <th>What it controls</th>
          <th>Where it lives</th>
          <th>How you edit it</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Infrastructure</strong></td>
          <td>Server ports, logging, voice toggle, ONNX paths</td>
          <td><code>config.yaml</code></td>
          <td>Text editor or environment variables</td>
      </tr>
      <tr>
          <td><strong>Resources</strong></td>
          <td>Agents, backends, memory, MCP tools, clients, commands, flows</td>
          <td><code>data/store.json</code></td>
          <td>Admin UI or Admin API (never by hand)</td>
      </tr>
  </tbody>
</table>
<p><strong>Infrastructure</strong> is about how the server runs. <strong>Resources</strong> are about what the server does.</p>
<p>Think of it like this: <code>config.yaml</code> is the wiring of your house (ports, protocols, switches). <code>store.json</code> is the furniture and appliances inside (your agents, their tools, who can talk to them).</p>
<h2 id="configyaml--infrastructure">config.yaml — Infrastructure</h2>
<p>This file is read once at startup. Changes require a server restart. It controls only the server process itself — nothing about agents, backends, or AI.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="m">0.0.0.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">          </span><span class="c"># User API + Voice UI</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">adminPort</span><span class="p">:</span><span class="w"> </span><span class="m">8081</span><span class="w">     </span><span class="c"># Admin API + Admin UI</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># adminPassword: ${MAGEC_ADMIN_PASSWORD}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># encryptionKey: ${MAGEC_ENCRYPTION_KEY}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">voice</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ui</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">     </span><span class="c"># Toggle Voice UI and voice routes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># onnxLibraryPath: /usr/lib/libonnxruntime.so</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">log</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l">info        </span><span class="w"> </span><span class="c"># debug, info, warn, error</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">console    </span><span class="w"> </span><span class="c"># console, json</span><span class="w">
</span></span></span></code></pre></div><h3 id="server">Server</h3>
<p>Controls where the server listens. Magec runs two HTTP servers on separate ports — one for users (API, Voice UI, webhooks) and one for administration (Admin UI, management API).</p>
<table>
  <thead>
      <tr>
          <th>Field</th>
          <th>Default</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>host</code></td>
          <td><code>0.0.0.0</code></td>
          <td>Bind address. Use <code>127.0.0.1</code> to restrict to localhost only.</td>
      </tr>
      <tr>
          <td><code>port</code></td>
          <td><code>8080</code></td>
          <td>User-facing port. The Voice UI, user API, webhook endpoints, and voice WebSocket all live here.</td>
      </tr>
      <tr>
          <td><code>adminPort</code></td>
          <td><code>8081</code></td>
          <td>Admin-facing port. The Admin UI and management API live here. In production, restrict access to this port.</td>
      </tr>
      <tr>
          <td><code>adminPassword</code></td>
          <td><em>(empty)</em></td>
          <td>Password for admin API authentication. When set, all <code>/api/</code> requests require <code>Authorization: Bearer &lt;password&gt;</code>. See <a href="/docs/admin-password/">Admin Password</a>.</td>
      </tr>
      <tr>
          <td><code>encryptionKey</code></td>
          <td><em>(empty)</em></td>
          <td>Key used to encrypt <a href="/docs/secrets/">Secrets</a> at rest (AES-256-GCM, PBKDF2-derived). When not set, secrets are stored in plain text with a warning. Independent from <code>adminPassword</code>.</td>
      </tr>
  </tbody>
</table>
<h3 id="voice">Voice</h3>
<p>Controls voice features at the server level. This is independent of per-agent voice settings — it&rsquo;s a global switch.</p>
<table>
  <thead>
      <tr>
          <th>Field</th>
          <th>Default</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>ui.enabled</code></td>
          <td><code>true</code></td>
          <td>When <code>true</code>, the Voice UI is served at the user port and all voice routes (STT proxy, TTS proxy, WebSocket) are active. Set to <code>false</code> for API-only deployments where you don&rsquo;t need voice.</td>
      </tr>
      <tr>
          <td><code>onnxLibraryPath</code></td>
          <td><em>auto-detect</em></td>
          <td>Path to the ONNX Runtime shared library (<code>.so</code> / <code>.dylib</code>). Magec tries to find it automatically. Only set this if auto-detection fails.</td>
      </tr>
  </tbody>
</table>
<h3 id="log">Log</h3>
<table>
  <thead>
      <tr>
          <th>Field</th>
          <th>Default</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>level</code></td>
          <td><code>info</code></td>
          <td>Minimum log level. Use <code>debug</code> during development to see detailed agent execution, MCP tool calls, and voice events.</td>
      </tr>
      <tr>
          <td><code>format</code></td>
          <td><code>console</code></td>
          <td><code>console</code> produces human-readable colored output. <code>json</code> produces structured logs for log aggregation systems.</td>
      </tr>
  </tbody>
</table>
<h3 id="environment-variables">Environment variables</h3>
<p>All values in <code>config.yaml</code> support <code>${VAR}</code> syntax for environment variable substitution. This is useful for Docker deployments where you want to configure the server without modifying the file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l">${MAGEC_PORT:-8080}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">log</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l">${LOG_LEVEL:-info}</span><span class="w">
</span></span></span></code></pre></div><h2 id="datastorejson--resources">data/store.json — Resources</h2>
<p>This is Magec&rsquo;s internal database. Every agent, backend, memory provider, MCP server, client, command, and flow is stored here. The server keeps it in memory for fast access and writes to disk on every change.</p>
<p><strong>You should never edit this file by hand.</strong> Use the Admin UI at <code>http://localhost:8081</code> or the Admin REST API. Both provide full CRUD for all resource types with validation, health checks, and immediate hot-reload.</p>
<h3 id="whats-inside">What&rsquo;s inside</h3>
<table>
  <thead>
      <tr>
          <th>Resource</th>
          <th>What it is</th>
          <th>More info</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Backends</strong></td>
          <td>Connections to AI providers (OpenAI, Anthropic, Gemini, Ollama)</td>
          <td><a href="/docs/backends/">AI Backends</a></td>
      </tr>
      <tr>
          <td><strong>Memory Providers</strong></td>
          <td>Session storage (Redis) and long-term memory (PostgreSQL + pgvector)</td>
          <td><a href="/docs/memory/">Memory</a></td>
      </tr>
      <tr>
          <td><strong>MCP Servers</strong></td>
          <td>External tool connections via Model Context Protocol</td>
          <td><a href="/docs/mcp/">MCP Tools</a></td>
      </tr>
      <tr>
          <td><strong>Agents</strong></td>
          <td>AI entities with their own LLM, prompt, memory, voice, and tools</td>
          <td><a href="/docs/agents/">Agents</a></td>
      </tr>
      <tr>
          <td><strong>Commands</strong></td>
          <td>Reusable prompts referenced by cron and webhook clients</td>
          <td><a href="/docs/commands/">Commands</a></td>
      </tr>
      <tr>
          <td><strong>Clients</strong></td>
          <td>Access points — Voice UI, Telegram, webhooks, cron — each with its own token</td>
          <td><a href="/docs/clients/">Clients</a></td>
      </tr>
      <tr>
          <td><strong>Flows</strong></td>
          <td>Multi-agent workflows with sequential, parallel, and loop steps</td>
          <td><a href="/docs/flows/">Flows</a></td>
      </tr>
      <tr>
          <td><strong>Secrets</strong></td>
          <td>Encrypted key-value pairs for API keys, tokens, and passwords</td>
          <td><a href="/docs/secrets/">Secrets</a></td>
      </tr>
  </tbody>
</table>
<h3 id="hot-reload">Hot-reload</h3>
<p>Changes made through the Admin UI or API take effect <strong>immediately</strong> — no server restart needed. When you update an agent&rsquo;s prompt, add a new backend, or modify a flow, the change is persisted to <code>store.json</code> and the server picks it up in real time.</p>
<h3 id="environment-variables-in-storejson">Environment variables in store.json</h3>
<p>Like <code>config.yaml</code>, the store also supports <code>${VAR}</code> substitution. This is particularly useful for keeping API keys and tokens out of the file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;apiKey&#34;</span><span class="p">:</span> <span class="s2">&#34;${OPENAI_API_KEY}&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The installer uses this for cloud deployments, so your API keys come from environment variables rather than being stored in plain text.</p>
<p>For a more convenient way to manage sensitive values, see <a href="/docs/secrets/">Secrets</a> — they let you store API keys through the Admin UI and reference them with the same <code>${VAR}</code> syntax.</p>
<h3 id="backup-and-restore">Backup and restore</h3>
<p>To back up your entire Magec configuration, copy <code>data/store.json</code>. To restore it, put it back and restart the server. That single file contains every resource you&rsquo;ve configured.</p>



<div class="docs-callout docs-callout--info">
  If you&rsquo;re running Magec via Docker Compose, the <code>data/</code> directory is mounted as a volume. Your configuration persists across container restarts and image updates.
</div>


    </div>
  </div>
</div>

  </main>
  <div id="lightbox" class="lightbox">
  <button class="lightbox__close" aria-label="Close">✕</button>
  <img id="lightbox-img" src="" alt="">
</div>

  <footer class="footer">
  <div class="container">
    <div class="footer__inner">
      <div class="footer__brand">
        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
          <defs><linearGradient id="fg" x1="0%" y1="100%" x2="100%" y2="0%"><stop offset="0%" stop-color="#f59e0b"/><stop offset="100%" stop-color="#f87171"/></linearGradient></defs>
          <circle cx="32" cy="32" r="26" fill="url(#fg)"/>
          <circle cx="20" cy="24" r="2" fill="white" opacity=".9"/><circle cx="40" cy="22" r="1.8" fill="white" opacity=".8"/>
          <circle cx="38" cy="38" r="2" fill="white" opacity=".75"/>
        </svg>
        Magec · Apache 2.0
      </div>
      <ul class="footer__links">
        <li><a href="https://github.com/achetronic/magec" target="_blank" rel="noopener">GitHub</a></li>
        <li><a href="/docs/">Docs</a></li>
        <li><a href="https://github.com/achetronic/magec/issues" target="_blank" rel="noopener">Issues</a></li>
      </ul>
    </div>
  </div>
</footer>

  <script type="module" src="/js/main.js"></script>
</body>
</html>
